<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Server Security · SeedTactic FMS Insight</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Secure HTTPS"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Server Security · SeedTactic FMS Insight"/><meta property="og:type" content="website"/><meta property="og:url" content="https://fms-insight.seedtactics.com/index.html"/><meta property="og:description" content="## Secure HTTPS"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/seedtactics-logo.svg" alt="SeedTactic FMS Insight"/><h2 class="headerTitleWithLogo">SeedTactic FMS Insight</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/overview.html" target="_self">Docs</a></li><li class=""><a href="https://github.com/SeedTactics/fms-insight" target="_self">Source Code</a></li><li class=""><a href="/demo/demo.html" target="_self">Demo</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Server</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Basics</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/material-tracking.html">Material Tracking</a></li><li class="navListItem"><a class="navItem" href="/docs/improve-fms.html">Monthly Review</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Server</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/server-config.html">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/server-errors.html">Errors</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/security.html">Security</a></li><li class="navListItem"><a class="navItem" href="/docs/creating-jobs.html">Creating Schedules</a></li><li class="navListItem"><a class="navItem" href="/docs/workorder-report.html">Workorder Report</a></li><li class="navListItem"><a class="navItem" href="/docs/part-instructions.html">Instructions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Client</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/client-launch.html">Launch</a></li><li class="navListItem"><a class="navItem" href="/docs/client-scanners.html">Scanners</a></li><li class="navListItem"><a class="navItem" href="/docs/client-station-monitor.html">Stations</a></li><li class="navListItem"><a class="navItem" href="/docs/client-operations.html">Operations</a></li><li class="navListItem"><a class="navItem" href="/docs/client-engineering.html">Engineering</a></li><li class="navListItem"><a class="navItem" href="/docs/client-quality.html">Quality</a></li><li class="navListItem"><a class="navItem" href="/docs/client-flexibility-analysis.html">Flexibility Analysis</a></li><li class="navListItem"><a class="navItem" href="/docs/client-backup-viewer.html">Backup Viewer</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Integrations</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/mazak.html">Mazak</a></li><li class="navListItem"><a class="navItem" href="/docs/makino.html">Makino</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Server Security</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="secure-https"></a><a href="#secure-https" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Secure HTTPS</h2>
<p>By default, FMS Insight does not use security and all communication is over HTTP.
To enable HTTPS, a server certificate must be created and stored in a file, and the
path to this file must be added to the <a href="/docs/server-config.html">config.ini</a> file in the <code>TLSCertFile</code> setting.</p>
<p>If you have an enterprise root certificate authority pre-installed on the
devices (usually as part of them joining the local AD domain), a private
certificate signed by the certificate authority should be created and then
used by specifying the path to the certificate in the <code>config.ini</code> file.
This will prevent browser warnings and is the most secure.</p>
<p>If you do not have an enterprise root certificate authority or cannot obtain
signed certificates, you can create a self-signed certificate. This will present
a warning on each device by the browser on first load and you will be required to
trust the self-signed certificate.</p>
<p>To create a self-signed certificate, the following PowerShell commands can be used.
You must replace the <code>$fmsInsightServer</code> variable with the IP address or DNS name that
will be used in the browser to connect to the FMS Insight server.</p>
<pre><code class="hljs"><span class="hljs-variable">$fmsInsightServer</span> = <span class="hljs-string">"172.16.17.18"</span>
<span class="hljs-variable">$certificate</span> = <span class="hljs-built_in">New-SelfSignedCertificate</span> <span class="hljs-literal">-CertStoreLocation</span> cert:\localmachine\my <span class="hljs-literal">-dnsname</span> <span class="hljs-variable">$fmsInsightServer</span> <span class="hljs-literal">-NotAfter</span> (GetDate).AddYears(<span class="hljs-number">10</span>)
<span class="hljs-built_in">Export-PfxCertificate</span> <span class="hljs-literal">-cert</span> (<span class="hljs-string">"cert:\localMachine\my\"</span> + <span class="hljs-variable">$certificate</span>.Thumbprint) <span class="hljs-literal">-FilePath</span> <span class="hljs-string">"c:\ProgramData\SeedTactics\FMSInsight\cert.pfx"</span>
</code></pre>
<p>The above lines can be pasted one-by-one into an administrator PowerShell. Once completed,
the certificate will be stored in <code>c:\ProgramData\SeedTactics\FMSInsight\cert.pfx</code>. This path
should be then set as the <code>TLSCertFile</code> property in <code>config.ini</code> (should just require un-commenting
the <code>TLSCertFile</code> line).</p>
<h2><a class="anchor" aria-hidden="true" id="authentication"></a><a href="#authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Authentication</h2>
<p>Authentication is via OpenID Connect and OAuth2. Any OpenID Connect identity provider such as
Azure Active Directory, Office 365, Okta, Keycloak, Google, or many others will work. If you don't have an OpenID
Connect identity provider (e.g. older versions of Active Directory or other SAML providers), you
could use something like <a href="https://www.okta.com/">Okta</a>.</p>
<p>Within your identity provider, create an application for FMS Insight and create a client.
The client must require implict grant flow with no client secret. The Redirect URI for the client
must be set to the common name from the TLS certificate with a root path. For example, say that you
created a TLS certificate with common name <code>cell-10-fms-insight.mycompany.com</code> and a DNS entry
mapping <code>cell-10-fms-insight.mycompany.com</code> to the FMS Insight cell controller. Then when configuring
the client, you would set the Redirect URL to <code>https://cell-10-fms-insight.mycompany.com:5000/</code>. Note down
the ClientID and find the authority URL for the identity provider. Finally, most identity providers allow
the administrator to restrict an application to a set of users (e.g. Azure Active Directory allows assigning
specific users or groups to the application). In this way, only certian users will be allowed to login and use
FMS Insight.</p>
<p>Optionally, if you are going to be accessing FMS Insight for <a href="/docs/creating-jobs.html">automatic job download</a>
without a user present, create a second client with a client secret and using the client-credentials OAuth2
flow. The automatic download will use this client for the machine-to-machine authentication.</p>
<p>Once the client has been created, there are three settings in the
<a href="server-config.ini">config.ini</a>.</p>
<ul>
<li><code>OpenIDConnectAuthority</code>: This setting is the path to the well-known configuration document for the identity provider.
From this document, FMS Insight obtains the signing keys and login URLs.</li>
<li><code>OpenIDConnectClientID</code>: This should be the ClientID for the implicit grant flow client. This ClientID is passed
to the FMS Insight webpage which then performs the implicit flow grant to obtain a token.</li>
<li><code>AuthTokenAudiences</code>: This is a list of audiences which the server uses to validate the identity tokens. In almost all
cases, the audience matches the ClientID. Multiple audiences are separated by semi-colons. Thus this setting should
be all the ClientIDs created separated by semi-colons.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/server-errors.html"><span class="arrow-prev">← </span><span>Errors</span></a><a class="docs-next button" href="/docs/creating-jobs.html"><span>Creating Schedules</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#secure-https">Secure HTTPS</a></li><li><a href="#authentication">Authentication</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/seedtactics-logo.svg" alt="SeedTactic FMS Insight" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/overview.html">Overview</a><a href="/docs/getting-started.html">Getting Started</a><a href="/docs/client-launch.html">Client</a><a href="/demo/demo.html">Demo</a></div><div><h5>More</h5><a href="https://github.com/SeedTactics/fms-insight">GitHub</a><a href="https://www.seedtactics.com">SeedTactics</a><a href="/docs/getting-started.html#downloads">Downloads</a></div></section><section class="copyright">Copyright © 2020 Black Maple Software, LLC</section></footer></div></body></html>